<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Backwards Words</title>
    <link rel="stylesheet" href="/static/style.css" />
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg" />
  </head>
  <body>
    <div id="join-screen" class="screen">
      <h1>Backwards Words</h1>
      <form id="join-form">
        <label>Party Password <input name="code" placeholder="e.g., PARTY" required style="text-transform: uppercase" /></label>
        <label>Your Name <input name="name" placeholder="e.g., ALEX" required style="text-transform: uppercase" /></label>
        <div class="avatar-picker">
          <label>Select Your Avatar</label>
          <div class="avatar-grid">
            <label class="avatar-option"><input type="radio" name="avatar" value="ü¶ä" checked><span class="chip">ü¶ä</span></label>
            <label class="avatar-option"><input type="radio" name="avatar" value="üê±"><span class="chip">üê±</span></label>
            <label class="avatar-option"><input type="radio" name="avatar" value="üê∂"><span class="chip">üê∂</span></label>
            <label class="avatar-option"><input type="radio" name="avatar" value="üêº"><span class="chip">üêº</span></label>
            <label class="avatar-option"><input type="radio" name="avatar" value="üê∏"><span class="chip">üê∏</span></label>
            <label class="avatar-option"><input type="radio" name="avatar" value="üêµ"><span class="chip">üêµ</span></label>
            <label class="avatar-option"><input type="radio" name="avatar" value="ü¶Å"><span class="chip">ü¶Å</span></label>
            <label class="avatar-option"><input type="radio" name="avatar" value="üê®"><span class="chip">üê®</span></label>
          </div>
        </div>
        <button type="submit">Join</button>
      </form>
      <p class="hint">Share your party link with everyone.</p>
      <div class="group" id="invite-group-join">
        <h3>Invite Friends</h3>
        <div class="copy-row">
          <div class="copy-hint">Tap to copy invite link</div>
          <input id="invite-url-join" class="invite-input" type="text" readonly />
        </div>
      </div>
    </div>

    <div id="game-screen" class="screen hidden">
      <div class="topbar">
        <div>Party: <span id="game-code"></span></div>
        <div>You: <span id="player-avatar" class="avatar"></span> <span id="player-name"></span></div>
        <div>Phase: <span id="phase"></span></div>
      </div>

      <div class="players">
        <h3>Players</h3>
        <ul id="players-list"></ul>
      </div>

      <div id="panel-lead" class="panel hidden">
        <h2>You're the Lead ‚Äî record up to 5s.</h2>
        <div class="recorder">
          <button id="lead-rec-btn" class="btn-record">Start Recording</button>
          <button id="lead-stop-btn" class="btn-stop" disabled>Stop</button>
          <div class="audio-row">
          <audio id="lead-play" class="audio-large" controls playsinline preload="metadata">
            <source id="lead-play-src" />
          </audio>
          </div>
          <button id="lead-upload-btn" class="btn-submit" disabled>Submit Clip</button>
        </div>
        <p>Everyone will try to replicate your clip (backwards).</p>
        <div class="group" id="invite-group-lead">
          <h3>Invite Friends</h3>
          <div class="copy-row">
            <div class="copy-hint">Tap to copy invite link</div>
            <input id="invite-url-lead" class="invite-input" type="text" readonly />
          </div>
        </div>
      </div>

      <div id="panel-wait-lead" class="panel hidden">
        <h2>Waiting for the Lead‚Ä¶</h2>
        <div class="lead-controls">
          <p>Once the clip is ready, you'll be able to play it forward and backwards.</p>
        </div>
        <div class="group" id="invite-group-wait">
          <h3>Invite Friends</h3>
          <div class="copy-row">
            <div class="copy-hint">Tap to copy invite link</div>
            <input id="invite-url-wait" class="invite-input" type="text" readonly />
          </div>
        </div>
      </div>

      <div id="panel-replicate" class="panel hidden">
        <h2>Replicate the clip (backwards)</h2>
        <div class="group" id="lead-clip-group">
          <h3>Lead Clip</h3>
          <div class="clip-controls">
            <button id="play-forward" class="btn-forward">Play Forward</button>
            <button id="play-backward" class="btn-reverse">Play Backwards</button>
          </div>
          <div class="audio-row">
            <audio id="lead-clip-player" class="audio-large" controls playsinline preload="metadata"></audio>
          </div>
        </div>
        <p id="spectator-note" class="hint hidden">You joined after this round started. You're spectating and will join the next round automatically.</p>
        <div class="group" id="your-rec-group">
          <h3>Your Recording</h3>
          <div class="recorder">
            <button id="rep-rec-btn" class="btn-record">Start Recording</button>
            <button id="rep-stop-btn" class="btn-stop" disabled>Stop</button>
            <div class="audio-row">
            <audio id="rep-play" class="audio-large" controls playsinline preload="metadata">
              <source id="rep-play-src" />
            </audio>
            </div>
            <button id="rep-upload-btn" class="btn-submit" disabled>Submit Replication</button>
          </div>
        </div>
        <p class="hint">No time limit. You can re-record; your last submission before voting starts will be counted. The round advances when everyone has submitted.</p>
      </div>

      <div id="panel-vote" class="panel hidden">
        <h2>Crown the Best</h2>
        <p id="vote-waiting" class="hint hidden">Waiting for other players to finish submitting. Voting will open automatically.</p>
        <p id="vote-spectator-note" class="hint hidden">You‚Äôre spectating this round. You can listen but cannot vote.</p>
        <div id="vote-list"></div>
        <div class="votes">
          <button id="submit-votes" class="btn-submit">Submit Vote</button>
          <button id="skip-vote" class="btn-skip" title="Skip your vote">Skip Vote</button>
        </div>
        <p class="hint">Tap the crown for the best clip. You can skip your vote.</p>
      </div>

      <div id="panel-wait-voting" class="panel hidden">
        <h2>Waiting for all players to vote‚Ä¶</h2>
        <p class="hint">You‚Äôve submitted your crown. We‚Äôll proceed once everyone has voted.</p>
      </div>

      <div id="panel-scoreboard" class="panel hidden">
        <h2>Podium</h2>
        <div id="podium" class="podium"></div>
        <div id="scores-grid" class="scores-grid"></div>
        <button id="next-round-btn" class="btn-forward">Start Next Round</button>
      </div>
    </div>

    <script src="/static/app.js"></script>
  </body>
  </html>
      <div id="panel-lobby" class="panel hidden">
        <h2>Lobby</h2>
        <p>Ready up to begin! Share your party link:</p>
        <div class="group">
          <h3>Invite Friends</h3>
          <div class="copy-row">
            <div class="copy-hint">Tap to copy invite link</div>
            <input id="invite-url-lobby" class="invite-input" type="text" readonly />
          </div>
        </div>
        <div class="group">
          <button id="toggle-ready" class="btn-ready" aria-pressed="false">I'm Ready</button>
          <div id="ready-hint" class="hint">Click to toggle. It glows gold when you‚Äôre ready.</div>
        </div>
      </div>
